"use strict";var insertPlayer=function(param,callback){var func={name:'insertPlayer()',token:'mimiko',ver:'kagami',area:$('#area-player'),callback:callback};if(param){if($.type(param)=='object'){$.extend(func,param);func.name='insertPlayer()'}else if($.isFunction(param)){func.callback=param}else{$.info('['+func.name+']错误类型的非法参数。')}};if(func.ver=='kagami'){func.flashplayer=system.flashplayer.path[0];func.width=980;func.height=480;func.player=$('#ACFlashPlayer')}else{func.flashplayer=system.flashplayer.path[1];func.width=950;func.height=445;func.player=$('#ACFlashPlayer-re')};system.player.origin=func.area.html();var insertKagami=function(type){if(func.ver!='kagami'){swfobject.embedSWF(func.flashplayer,'ACFlashPlayer-re',func.width,func.height,'9.0.115',func.flashplayer,{vid:system.vid,system:func.system,type:func.type,width:func.width,height:func.height,wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'},{wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'},{wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'})}else{$('#area-player').after('<div id="item-dom-insert"></div>');var rid=$.mid();swfobject.embedSWF('http://static.acfun.tv/player/DataReceiver0926.swf','item-dom-insert',1,1,'9.0.115','http://static.acfun.tv/player/DataReceiver0926.swf',{lcid:rid,width:1,height:1,wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'},{wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'},{wmode:'direct',allowFullscreenInteractive:'true',allowfullscreen:'true',allowscriptaccess:'always'});var param='#vid='+system.vid+';system='+func.system+';type='+func.type+';lcid='+rid+';width=980;height=480';var html='<iframe id="ACFlashPlayer-re" frameBorder="0" src="https://ssl.acfun.tv/block-player-https.html?date=04301820'+param+'"></iframe>';$('#area-player').html(html)}};if(func.player.length){func.system='Old';func.cbp='bottom';var src=func.player.attr('src')&&func.player.attr('src').search(/\?/)!=-1?func.player.attr('src').replace(/.*?\?/,''):'ruler=mimiko';var vars=func.player.attr('flashvars')?'&'+func.player.attr('flashvars'):'';var a=src+vars;a=a.split('&');var b={};for(var i=0,l=a.length;i<l;i++){var c=a[i].split('=');b[c[0]]=c[1]};system.vid=b.id?b.id.toString().replace(/\n/g,''):b.vid?b.vid:131797;system.info={type:b.type||b.type2||'sina',cid:b.cid,vid:b.id,url:b.vurl};func.type=system.info.type;system.info.type=system.info.type=='video'?'sina':system.info.type;func.area.html('<div id="shadow-player"><div id="ACFlashPlayer-re"></div></div>');insertKagami()}else{func.system='Artemis';func.type=null;func.cbp='over';var c=$('#area-player').html();var b=!!c&&c.toString().toLowerCase().search(/\[video\]\d+?\[\/video\]/)!=-1?c:'[video]131797[/video]';var a=b.toString().toLowerCase().match(/\[video\]\d+?\[\/video\]/)[0];system.vid=a.toString().replace(/\[.*?\]/g,'');func.area.html('<div id="ACFlashPlayer-re"></div>');insertKagami()};func.area.removeClass('hidden');if($.isFunction(func.callback)){func.callback()}};var toggleLight=function(callback){var func={name:'toggleLight',callback:callback};var stage=$('#stage');if(!system.gate.lightOff){system.gate.lightOff=1;$.curtain(true,function(){$('#curtain').addClass('dark').one('click',function(){toggleLight()});$.info('进入关灯模式。\n点击黑色幕布退出关灯模式。');$('#area-player').scrollOnto()})}else{system.gate.lightOff=0;$.curtain(false,function(){$.info('退出关灯模式。')})};if($.isFunction(func.callback)){func.callback()}};var toggleFullScreen=function(callback){var order={funcname:'toggleFullScreen',callback:callback};var player=$('#ACFlashPlayer-re');var stage=$('#stage');if(!system.gate.fullscreen){system.gate.fullscreen=1;$.info('进入网页全屏模式。');stage.css({height:$(window).innerHeight()});$('#guide, #block-tool-footer').addClass('hidden');player.css({width:$(window).innerWidth(),height:$(window).height(),left:-player.offset().left+player.position().left,top:-player.offset().top,'z-index':255});$(window).bind('resize.player',function(){window.clearTimeout(system.timer.playerFullScreen);var time=20;system.timer.playerFullScreen=window.setTimeout(function(){stage.css({height:$(window).innerHeight()});player.css({width:980,height:480,left:0,top:0}).css({width:$(window).innerWidth(),height:$(window).height(),left:-player.offset().left,top:-player.offset().top})},time)}).resize()}else{system.gate.fullscreen=0;$.info('退出网页全屏模式。');window.clearTimeout(system.timer.playerFullScreen);$('#stage').css({height:'auto'});$('#guide, #block-tool-footer').removeClass('hidden');player.css({width:980,height:480,left:0,top:0});$(window).unbind('resize.player')}};var toggleWideMode=function(height){var player=$('#ACFlashPlayer-re');if(!!height&&height>480){$.info('进入宽屏模式。');height=height>640?640:height;player.css({height:height}).scrollOnto()}else{$.info('退出宽屏模式。');player.css({height:480})}};var focusComment=function(){$('#btn-send-editor').scrollOnto()};
