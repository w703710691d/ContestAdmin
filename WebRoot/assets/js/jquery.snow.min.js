(function($){"use strict";$.fn.snow=function(p){var wh=$(window).height(),ww=$(window).width(),ws=$(window).scrollTop(),n=0,d={character:"&#10052;",size:[8,24],interval:500,color:"#FFFFFF",max:24},p=$.extend({},d,p);var elem=$('<div class="flake" />').css({position:"absolute",top:"-50px"}).html(p.character);elem.data({timer:{}});$(window).off("resize.snow").on("resize.snow",function(){window.clearTimeout(elem.data().timer.resize);elem.data().timer.resize=window.setTimeout(function(){wh=$(window).height();ww=$(window).width();ws=$(window).scrollTop()},200)}).off("scroll.snow").on("scroll.snow",function(){window.clearTimeout(elem.data().timer.scroll);elem.data().timer.scroll=window.setTimeout(function(){ws=$(window).scrollTop()},200)});setInterval(function(){if(n<p.max){var size=p.size[0]+Math.random()*p.size[1];var left=[96+Math.random()*(ww-192)];left[1]=left[0]-96+Math.random()*192;var opacity=.6+size*.02;var top=[ws-40];top[1]=top[0]+wh;var time=wh*size*.6+Math.random()*5e3;elem.clone().appendTo("body").css({left:left[0],top:top[0],opacity:opacity,"font-size":size,color:$.isArray(p.color)?p.color[$.rnd(p.color.length)]:p.color,cursor:"default"}).animate({left:left[1],top:top[1],opacity:0},time,"linear",function(){$(this).remove();n--});n++}},p.interval);$.info&&$.info("debug::雪元素准备就绪。")}})(jQuery);